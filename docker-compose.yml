version: '3'
services:
    app:
        build:
            context: .
            dockerfile: Dockerfile
        image: hoonian-app
        container_name: hoonian-app
        restart: unless-stopped
        tty: true
        ports:
            - "8004:80"
        environment:
            # Database configuration - update these with your external database credentials
            DB_CONNECTION: mysql
            DB_HOST: ${DB_HOST}
            DB_PORT: ${DB_PORT:-3306}
            DB_DATABASE: ${DB_DATABASE}
            DB_USERNAME: ${DB_USERNAME}
            DB_PASSWORD: ${DB_PASSWORD}
            # App configuration
            APP_NAME: ${APP_NAME:-Laravel}
            APP_ENV: ${APP_ENV:-production}
            APP_KEY: ${APP_KEY}
            APP_DEBUG: ${APP_DEBUG:-false}
            APP_URL: ${APP_URL:-http://localhost:8000}
        extra_hosts:
            - "host.docker.internal:host-gateway"
        volumes:
            - ./storage:/var/www/storage
            - ./bootstrap/cache:/var/www/bootstrap/cache
        networks:
            - app-network

networks:
    app-network:
        driver: bridge
